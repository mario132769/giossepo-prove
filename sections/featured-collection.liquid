{{ 'section-featured.css' | asset_url | stylesheet_tag }}

<div class="featured-collection">
  {% if section.settings.heading != blank %}
    <h2>{{ section.settings.heading }}</h2>
  {% endif %}
  <div class="featured-products">
    {% if section.settings.collection.products.size > 0 %}
      {% for product in section.settings.collection.products limit: section.settings.max_products %}
        <div class="product-card">
          <a href="{{ product.url }}">
            <img width="400" height="400" src="{{ product.featured_image | image_url: width: 400 }}" alt="{{ product.title }}">
            {% if section.settings.show_title %}
              <p>{{ product.title }}</p>
            {% endif %}
            {% if section.settings.show_description %}
              <p>{{ product.description | truncatewords: 10 }}</p>
            {% endif %}
            {% if section.settings.show_price %}
              <p>{{ product.price | money }}</p>
            {% endif %}
          </a>
        </div>
      {% endfor %}
    {% else %}
      <p>No hay productos en esta colección.</p>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Colección destacada",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Título"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Colección"
    },
    {
      "type": "range",
      "id": "max_products",
      "label": "Máximo de productos",
      "min": 1,
      "max": 12,
      "step": 1,
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_title",
      "label": "Mostrar título del producto",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "Mostrar descripción del producto",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_price",
      "label": "Mostrar precio del producto",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Colección destacada por defecto"
    }
  ]
}
{% endschema %}
